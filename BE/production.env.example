# ===========================================
# 2TDATA-WEB Backend - PRODUCTION Environment
# ===========================================
# Copy this file to .env for production deployment
# IMPORTANT: Change all default values before production use!

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# Database system selection
USE_POSTGRES=true
USE_MONGO=true

# PostgreSQL Production Database
POSTGRES_DB=2tdata_postgres_prod
POSTGRES_USER=prod_postgres_user
POSTGRES_PASSWORD=CHANGE_THIS_POSTGRES_PASSWORD
POSTGRES_HOST=prod_postgres_host
POSTGRES_PORT=5432

# MongoDB Production Database
DB_URI=mongodb://prod_user:CHANGE_THIS_PASSWORD@prod_mongodb_host:27017/2TDATA_PROD
MONGODB_URI=mongodb://prod_user:CHANGE_THIS_PASSWORD@prod_mongodb_host:27017/2TDATA_PROD

# ===========================================
# SERVER CONFIGURATION
# ===========================================
PORT=3004
NODE_ENV=production

# ===========================================
# AUTHENTICATION & SECURITY
# ===========================================
# CRITICAL: Change these secrets for production!
SECRET_KEY="CHANGE_THIS_TO_VERY_LONG_AND_SECURE_SECRET_KEY_32_CHARS_MINIMUM"
JWT_SECRET="CHANGE_THIS_TO_VERY_LONG_AND_SECURE_JWT_SECRET_KEY_32_CHARS_MINIMUM"
JWT_EXPIRES_IN=24h

# Security
BCRYPT_SALT_ROUNDS=12

# ===========================================
# DOMAIN & CORS CONFIGURATION
# ===========================================
# Production domain
MAIN_DOMAIN=yourdomain.com
DEFAULT_DOMAIN=yourdomain.com

# Frontend URL
FRONTEND_URL=https://yourdomain.com

# CORS - Only allow your production domains
ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ===========================================
# METABASE CONFIGURATION (Optional)
# ===========================================
METABASE_URL=https://metabase.yourdomain.com
METABASE_USERNAME=admin@yourdomain.com
METABASE_PASSWORD=CHANGE_THIS_METABASE_PASSWORD

# ===========================================
# FILE UPLOAD CONFIGURATION
# ===========================================
MAX_FILE_SIZE=20971520
UPLOAD_DIR=./uploads

# ===========================================
# EMAIL CONFIGURATION
# ===========================================
# Email configuration for OTP and notifications
SEND_OTP_EMAIL="your_email@yourdomain.com"
SEND_OTP_EMAIL_PASSWORD="CHANGE_THIS_EMAIL_PASSWORD"

# ===========================================
# REDIS CONFIGURATION (Optional)
# ===========================================
REDIS_HOST=prod_redis_host
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
LOG_LEVEL=warn

# ===========================================
# RATE LIMITING
# ===========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# PRODUCTION SECURITY SETTINGS
# ===========================================
# SSL/TLS Configuration
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/private.key

# Trust proxy (for reverse proxy setups like nginx)
TRUST_PROXY=true

# ===========================================
# PRODUCTION OPTIMIZATION
# ===========================================
# Disable debug mode
DEBUG=false
VERBOSE_ERRORS=false

# ===========================================
# MONITORING & HEALTH CHECKS
# ===========================================
HEALTH_CHECK_PATH=/api/health

# ===========================================
# PRODUCTION CHECKLIST
# ===========================================
# Before deploying to production, ensure:
# ✅ All passwords and secrets are changed
# ✅ JWT_SECRET is at least 32 characters long
# ✅ Database credentials are production-specific
# ✅ CORS origins are restricted to your domains only
# ✅ HTTPS is configured
# ✅ SSL certificates are valid
# ✅ Logging is configured
# ✅ Rate limiting is appropriate
# ✅ File upload limits are set
# ✅ Error handling is production-ready
# ✅ Monitoring is set up
# ✅ Backup strategy is in place
# ✅ Process manager (PM2) is configured
# ✅ Reverse proxy (nginx) is configured
# ✅ Health checks are working
# ✅ Environment variables are secure
